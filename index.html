<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Liga Chilena Pro</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; font-family: 'Arial Black', sans-serif; touch-action: none; }
        #menu-inicio {
            position: absolute; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.9); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;
        }
        .equipos { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; justify-content: center; }
        .equipo-btn { 
            background: white; border: 4px solid #f1c40f; border-radius: 15px;
            padding: 10px; width: 70px; height: 70px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .equipo-btn img { max-width: 100%; max-height: 100%; }
        canvas { display: block; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="menu-inicio">
    <h1 style="text-align:center">ELIGE TU EQUIPO</h1>
    <div class="equipos">
        <div class="equipo-btn" onclick="iniciarJuego(0)">
            <img src="https://logodownload.org/wp-content/uploads/2018/09/colo-colo-logo.png" alt="CC">
        </div>
        <div class="equipo-btn" onclick="iniciarJuego(1)">
            <img src="https://logodownload.org/wp-content/uploads/2018/09/universidad-de-chile-logo.png" alt="U">
        </div>
        <div class="equipo-btn" onclick="iniciarJuego(2)">
            <img src="https://logodownload.org/wp-content/uploads/2018/09/universidad-catolica-logo.png" alt="UC">
        </div>
    </div>
    <p style="margin-top:20px">TOCA EL ESCUDO PARA JUGAR</p>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const menu = document.getElementById("menu-inicio");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const links = [
    "https://logodownload.org/wp-content/uploads/2018/09/colo-colo-logo.png",
    "https://logodownload.org/wp-content/uploads/2018/09/universidad-de-chile-logo.png",
    "https://logodownload.org/wp-content/uploads/2018/09/universidad-catolica-logo.png"
];

let imgJugador = new Image();
imgJugador.crossOrigin = "anonymous"; // Ayuda a cargar imágenes de otros sitios

let imagenesRivales = [];
let juegoActivo = false;
let score = 0;
let obstaculos = [];

const jugador = { x: 60, y: 0, w: 60, h: 60, dy: 0, salto: 15, gravedad: 0.8, enSuelo: false };

function iniciarJuego(index) {
    imgJugador.src = links[index];
    
    // Preparar rivales
    imagenesRivales = [];
    links.forEach((link, i) => {
        if (i !== index) {
            let img = new Image();
            img.crossOrigin = "anonymous";
            img.src = link;
            imagenesRivales.push(img);
        }
    });

    menu.classList.add("hidden");
    juegoActivo = true;
    score = 0;
    obstaculos = [];
    jugador.y = canvas.height - 150;
    
    bucle();
}

function saltar() {
    if (jugador.enSuelo && juegoActivo) {
        jugador.dy = -jugador.salto;
        jugador.enSuelo = false;
    }
}

function crearObstaculo() {
    if (juegoActivo && imagenesRivales.length > 0) {
        const imgAleatoria = imagenesRivales[Math.floor(Math.random() * imagenesRivales.length)];
        obstaculos.push({ x: canvas.width, w: 50, h: 50, img: imgAleatoria });
    }
}

function actualizar() {
    if (!juegoActivo) return;
    jugador.dy += jugador.gravedad;
    jugador.y += jugador.dy;
    const sueloY = canvas.height - 50;
    if (jugador.y + jugador.h > sueloY) {
        jugador.y = sueloY - jugador.h;
        jugador.dy = 0;
        jugador.enSuelo = true;
    }
    obstaculos.forEach((obs, i) => {
        obs.x -= 7;
        if (jugador.x < obs.x + obs.w - 10 && jugador.x + jugador.w - 10 > obs.x &&
            jugador.y + jugador.h > sueloY - obs.h) {
            juegoActivo = false;
            setTimeout(() => { location.reload(); }, 300);
        }
        if (obs.x + obs.w < 0) {
            obstaculos.splice(i, 1);
            score++;
        }
    });
}

function dibujar() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Césped
    ctx.fillStyle = "#2ecc71";
    ctx.fillRect(0, canvas.height - 50, canvas.width, 50);
    // Línea de cancha
    ctx.strokeStyle = "white";
    ctx.lineWidth = 2;
    ctx.strokeRect(0, canvas.height - 50, canvas.width, 50);

    // Dibujar Jugador (Escudo elegido)
    if (imgJugador.complete) {
        ctx.drawImage(imgJugador, jugador.x, jugador.y, jugador.w, jugador.h);
    }

    // Dibujar Obstáculos (Escudos rivales)
    obstaculos.forEach(obs => {
        if (obs.img.complete) {
            ctx.drawImage(obs.img, obs.x, canvas.height - 50 - obs.h, obs.w, obs.h);
        }
    });

    ctx.fillStyle = "white";
    ctx.font = "bold 24px sans-serif";
    ctx.fillText("GOLES: " + score, 20, 50);
}

function bucle() {
    if (juegoActivo) {
        actualizar();
        dibujar();
        requestAnimationFrame(bucle);
    }
}

window.addEventListener("touchstart", (e) => { e.preventDefault(); saltar(); }, {passive: false});
window.addEventListener("mousedown", saltar);
setInterval(crearObstaculo, 1600);
</script>
</body>
</html>
